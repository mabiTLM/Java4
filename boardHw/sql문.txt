sqlplus

system
1234

alter session set "_ORACLE_SCRIPT"=true;
create user board1117 identified by qwer;
grant connect, resource, dba to board1117;

exit

sqlplus

board1117
qwer


--alter table boards drop constraint fk_users_to_boards;
--alter table likes_and_hates drop constraint fk_users_to_likes_and_hates;
--alter table likes_and_hates drop constraint fk_boards_to_likes_and_hates;
--alter table comments drop constraint fk_users_to_comments;
--alter table comments drop constraint fk_boards_to_comments;
--drop table users;
--drop table boards;
--drop table likes_and_hates;
--drop table comments;

create table users (
id number generated as identity primary key,
user_id varchar2(50) not null unique,
password varchar2(64) not null,
name varchar2(20) not null,
phone varchar2(14) not null,
address varchar2(100),
email varchar2(100) not null unique,
git_address varchar2(100),
gender number(1),
birth date,
created_at timestamp default sysdate
);

create table boards (
id number generated as identity primary key,
title varchar2(100) not null,
content long not null,
views number default 0,
created_at timestamp default sysdate,
is_withdrew number(1) default 0,
user_id number,
constraint fk_users_to_boards foreign key (user_id) references users(id)
);

create table likes_and_hates (
id number generated as identity primary key,
user_id number,
board_id number,
likes_or_hates number(1),
created_at timestamp default sysdate,
constraint fk_users_to_likes_and_hates foreign key (user_id) references users(id),
constraint fk_boards_to_likes_and_hates foreign key (board_id) references boards(id)
);


create table comments (
id number generated as identity primary key,
content long not null,
created_at timestamp default current_timestamp,
is_withdrew number(1) default 0,
user_id number not null,
board_id number not null,
comment_id number,
constraint fk_users_to_comments foreign key (user_id) references users(id),
constraint fk_boards_to_comments foreign key (board_id) references boards(id),
constraint fk_comments_to_comments foreign key (comment_id) references comments(id)
);